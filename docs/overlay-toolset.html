<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.2 Overlay Toolset | Burning Bridges</title>
  <meta name="description" content="5.2 Overlay Toolset | Burning Bridges" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5.2 Overlay Toolset | Burning Bridges" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.2 Overlay Toolset | Burning Bridges" />
  
  
  

<meta name="author" content="Nils Ratnaweera" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="extract-toolset.html"/>
<link rel="next" href="proximity-toolset.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i><b>2</b> Foreword</a></li>
<li class="chapter" data-level="3" data-path="making-maps.html"><a href="making-maps.html"><i class="fa fa-check"></i><b>3</b> Making Maps</a><ul>
<li class="chapter" data-level="3.1" data-path="making-static-maps.html"><a href="making-static-maps.html"><i class="fa fa-check"></i><b>3.1</b> Making Static Maps</a><ul>
<li class="chapter" data-level="3.1.1" data-path="making-static-maps.html"><a href="making-static-maps.html#static-maps-with-ggplot2"><i class="fa fa-check"></i><b>3.1.1</b> Static maps with <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="making-interactive-maps.html"><a href="making-interactive-maps.html"><i class="fa fa-check"></i><b>3.2</b> Making Interactive Maps</a><ul>
<li class="chapter" data-level="3.2.1" data-path="making-interactive-maps.html"><a href="making-interactive-maps.html#introduction-to-tmap"><i class="fa fa-check"></i><b>3.2.1</b> Introduction to <code>tmap</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-spatial-operations.html"><a href="basic-spatial-operations.html"><i class="fa fa-check"></i><b>4</b> Basic spatial operations</a><ul>
<li class="chapter" data-level="4.1" data-path="select-by-attribute.html"><a href="select-by-attribute.html"><i class="fa fa-check"></i><b>4.1</b> Select by Attribute</a></li>
<li class="chapter" data-level="4.2" data-path="select-by-location.html"><a href="select-by-location.html"><i class="fa fa-check"></i><b>4.2</b> Select by Location</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analysis-toolbox.html"><a href="analysis-toolbox.html"><i class="fa fa-check"></i><b>5</b> Analysis Toolbox</a><ul>
<li class="chapter" data-level="5.1" data-path="extract-toolset.html"><a href="extract-toolset.html"><i class="fa fa-check"></i><b>5.1</b> Extract Toolset</a><ul>
<li class="chapter" data-level="5.1.1" data-path="extract-toolset.html"><a href="extract-toolset.html#clip"><i class="fa fa-check"></i><b>5.1.1</b> Clip</a></li>
<li class="chapter" data-level="5.1.2" data-path="extract-toolset.html"><a href="extract-toolset.html#split"><i class="fa fa-check"></i><b>5.1.2</b> Split</a></li>
<li class="chapter" data-level="5.1.3" data-path="extract-toolset.html"><a href="extract-toolset.html#split-by-attributes"><i class="fa fa-check"></i><b>5.1.3</b> Split by Attributes</a></li>
<li class="chapter" data-level="5.1.4" data-path="extract-toolset.html"><a href="extract-toolset.html#table-select"><i class="fa fa-check"></i><b>5.1.4</b> Table Select</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="overlay-toolset.html"><a href="overlay-toolset.html"><i class="fa fa-check"></i><b>5.2</b> Overlay Toolset</a><ul>
<li class="chapter" data-level="5.2.1" data-path="overlay-toolset.html"><a href="overlay-toolset.html#merge"><i class="fa fa-check"></i><b>5.2.1</b> Merge</a></li>
<li class="chapter" data-level="5.2.2" data-path="overlay-toolset.html"><a href="overlay-toolset.html#erase"><i class="fa fa-check"></i><b>5.2.2</b> Erase</a></li>
<li class="chapter" data-level="5.2.3" data-path="overlay-toolset.html"><a href="overlay-toolset.html#union"><i class="fa fa-check"></i><b>5.2.3</b> Union</a></li>
<li class="chapter" data-level="5.2.4" data-path="overlay-toolset.html"><a href="overlay-toolset.html#symmetrical-difference"><i class="fa fa-check"></i><b>5.2.4</b> Symmetrical Difference</a></li>
<li class="chapter" data-level="5.2.5" data-path="overlay-toolset.html"><a href="overlay-toolset.html#spatial-join"><i class="fa fa-check"></i><b>5.2.5</b> Spatial Join</a></li>
<li class="chapter" data-level="5.2.6" data-path="overlay-toolset.html"><a href="overlay-toolset.html#intersect"><i class="fa fa-check"></i><b>5.2.6</b> Intersect</a></li>
<li class="chapter" data-level="5.2.7" data-path="overlay-toolset.html"><a href="overlay-toolset.html#identity"><i class="fa fa-check"></i><b>5.2.7</b> Identity</a></li>
<li class="chapter" data-level="5.2.8" data-path="overlay-toolset.html"><a href="overlay-toolset.html#update"><i class="fa fa-check"></i><b>5.2.8</b> Update</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="proximity-toolset.html"><a href="proximity-toolset.html"><i class="fa fa-check"></i><b>5.3</b> Proximity Toolset</a><ul>
<li class="chapter" data-level="5.3.1" data-path="proximity-toolset.html"><a href="proximity-toolset.html#buffer"><i class="fa fa-check"></i><b>5.3.1</b> Buffer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-management-toolbox.html"><a href="data-management-toolbox.html"><i class="fa fa-check"></i><b>6</b> Data Management Toolbox</a><ul>
<li class="chapter" data-level="6.1" data-path="joins-and-relates-toolset.html"><a href="joins-and-relates-toolset.html"><i class="fa fa-check"></i><b>6.1</b> Joins and Relates Toolset</a></li>
<li class="chapter" data-level="6.2" data-path="projections-and-transformations-toolset.html"><a href="projections-and-transformations-toolset.html"><i class="fa fa-check"></i><b>6.2</b> Projections and Transformations Toolset</a><ul>
<li class="chapter" data-level="6.2.1" data-path="projections-and-transformations-toolset.html"><a href="projections-and-transformations-toolset.html#reproject-vector-data-in-r"><i class="fa fa-check"></i><b>6.2.1</b> Reproject vector data in R</a></li>
<li class="chapter" data-level="6.2.2" data-path="projections-and-transformations-toolset.html"><a href="projections-and-transformations-toolset.html#reproject-raster-data-in-r"><i class="fa fa-check"></i><b>6.2.2</b> Reproject raster data in R</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="topology-toolset.html"><a href="topology-toolset.html"><i class="fa fa-check"></i><b>6.3</b> Topology Toolset</a></li>
<li class="chapter" data-level="6.4" data-path="sampling-toolset.html"><a href="sampling-toolset.html"><i class="fa fa-check"></i><b>6.4</b> Sampling Toolset</a><ul>
<li class="chapter" data-level="6.4.1" data-path="sampling-toolset.html"><a href="sampling-toolset.html#generate-tessellation"><i class="fa fa-check"></i><b>6.4.1</b> Generate Tessellation</a></li>
<li class="chapter" data-level="6.4.2" data-path="sampling-toolset.html"><a href="sampling-toolset.html#create-fishnet"><i class="fa fa-check"></i><b>6.4.2</b> Create Fishnet</a></li>
<li class="chapter" data-level="6.4.3" data-path="sampling-toolset.html"><a href="sampling-toolset.html#create-random-points"><i class="fa fa-check"></i><b>6.4.3</b> Create Random Points</a></li>
<li class="chapter" data-level="6.4.4" data-path="sampling-toolset.html"><a href="sampling-toolset.html#generate-points-along-lines"><i class="fa fa-check"></i><b>6.4.4</b> Generate Points Along Lines</a></li>
<li class="chapter" data-level="6.4.5" data-path="sampling-toolset.html"><a href="sampling-toolset.html#generate-rectangles-along-lines"><i class="fa fa-check"></i><b>6.4.5</b> Generate Rectangles Along Lines</a></li>
<li class="chapter" data-level="6.4.6" data-path="sampling-toolset.html"><a href="sampling-toolset.html#generate-transsects-along-lines"><i class="fa fa-check"></i><b>6.4.6</b> Generate Transsects Along Lines</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="raster-toolset.html"><a href="raster-toolset.html"><i class="fa fa-check"></i><b>6.5</b> Raster Toolset</a><ul>
<li class="chapter" data-level="6.5.1" data-path="raster-toolset.html"><a href="raster-toolset.html#mosaic-dataset-toolset"><i class="fa fa-check"></i><b>6.5.1</b> Mosaic Dataset Toolset</a></li>
<li class="chapter" data-level="6.5.2" data-path="raster-toolset.html"><a href="raster-toolset.html#ortho-mapping-toolset"><i class="fa fa-check"></i><b>6.5.2</b> Ortho Mapping Toolset</a></li>
<li class="chapter" data-level="6.5.3" data-path="raster-toolset.html"><a href="raster-toolset.html#raster-dataset-toolset"><i class="fa fa-check"></i><b>6.5.3</b> Raster Dataset Toolset</a></li>
<li class="chapter" data-level="6.5.4" data-path="raster-toolset.html"><a href="raster-toolset.html#raster-processing-toolset"><i class="fa fa-check"></i><b>6.5.4</b> Raster Processing Toolset</a></li>
<li class="chapter" data-level="6.5.5" data-path="raster-toolset.html"><a href="raster-toolset.html#raster-properties-toolset"><i class="fa fa-check"></i><b>6.5.5</b> Raster Properties Toolset</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Burning Bridges</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="overlay-toolset" class="section level2">
<h2><span class="header-section-number">5.2</span> Overlay Toolset</h2>
<div id="merge" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Merge</h3>
<p>Let’s assume in the example below that instead of having four individual areas of interest, we are interested in having one common, unified area on which we focus our analysis. In other words, we have to <strong>merge</strong> the existing four areas into one. In ArcGIS pro the respective tools for this action is either the <code>Merge</code> or the <code>Dissolve</code> tool.<br />
In R on the other hand, this can be easily performed using the <em>st_union</em> function in the <strong>sf</strong> package.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="overlay-toolset.html#cb75-1"></a><span class="co"># The area of interest from the previous example - section Clip</span></span>
<span id="cb75-2"><a href="overlay-toolset.html#cb75-2"></a>kantons_aOi</span></code></pre></div>
<pre><code>## Simple feature collection with 12 features and 22 fields (with 5 geometries empty)
## geometry type:  MULTIPOLYGON
## dimension:      XYZ
## bbox:           xmin: 2620698 ymin: 1193269 xmax: 2768769 ymax: 1283504
## z_range:        zmin: 260.666 zmax: 3246.858
## projected CRS:  CH1903+ / LV95
## First 10 features:
##                                        uuid datum_aend datum_erst erstellung
## 6    {05D55405-466B-4ECC-83C7-A906DEB0D607} 2017-12-04 2012-10-26       2012
## 7    {FB7105B8-6D7C-4787-846E-17B2BC145C6E} 2018-11-22 2012-10-26       2012
## 10   {E11CD2CA-2E2D-415C-8789-C10D7C26E441} 2016-12-09 2012-10-26       2012
## 12   {87370D3F-DBBE-4D05-AF85-C358C3924B3D} 2018-11-22 2012-10-26       2012
## 41   {99488953-65F6-4F86-8606-337113587F85} 2015-12-08 2012-10-26       2012
## 47   {F1A07951-AC8B-4EBA-B48F-64BC8B92228C} 2015-12-08 2012-10-26       2012
## 48   {784EB478-2D40-4620-80F8-ACC252A6FD02} 2015-12-08 2012-10-26       2012
## NA                                     &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;         NA
## NA.1                                   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;         NA
## NA.2                                   &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;         NA
##      erstellu_1 revision_j revision_m grund_aend herkunft herkunft_j herkunft_m
## 6            10       2019          1        400      100       2018          1
## 7            10       2019          1        400      500       2019          1
## 10           10       2019          1        400      100       2017          1
## 12           10       2019          1        400      500       2019          1
## 41           10       2019          1        400      500       2015         12
## 47           10       2019          1        400      500       2015         12
## 48           10       2019          1        400      500       2015         12
## NA           NA         NA         NA         NA       NA         NA         NA
## NA.1         NA         NA         NA         NA       NA         NA         NA
## NA.2         NA         NA         NA         NA       NA         NA         NA
##      objektart kantonsnum see_flaech  revision_q kantonsfla kanton_tei
## 6            0         17       7720 2018_Aufbau     202820          1
## 7            0          1       6811 2018_Aufbau     172894          0
## 10           0         19        870 2018_Aufbau     140380          1
## 12           0         20      13121 2018_Aufbau      99433          1
## 41           0         20          0 2018_Aufbau          0          2
## 47           0         17          0 2018_Aufbau          0          2
## 48           0         19          0 2018_Aufbau          0          2
## NA          NA         NA         NA        &lt;NA&gt;         NA         NA
## NA.1        NA         NA         NA        &lt;NA&gt;         NA         NA
## NA.2        NA         NA         NA        &lt;NA&gt;         NA         NA
##            name  icc einwohnerz Shape_Leng   Shape_Area
## 6    St. Gallen   CH     504686 494074.195 2.028094e+09
## 7        Zürich   CH    1504346 312972.523 1.728942e+09
## 10       Aargau   CH     670988 328943.352 1.403783e+09
## 12      Thurgau   CH     273801 287778.920 9.905920e+08
## 41      Thurgau   CH          0   8640.269 3.737271e+06
## 47   St. Gallen   CH          0   1481.811 1.054068e+05
## 48       Aargau   CH          0    537.994 1.486573e+04
## NA         &lt;NA&gt; &lt;NA&gt;         NA         NA           NA
## NA.1       &lt;NA&gt; &lt;NA&gt;         NA         NA           NA
## NA.2       &lt;NA&gt; &lt;NA&gt;         NA         NA           NA
##                            geometry
## 6    MULTIPOLYGON Z (((2703763 1...
## 7    MULTIPOLYGON Z (((2673542 1...
## 10   MULTIPOLYGON Z (((2673542 1...
## 12   MULTIPOLYGON Z (((2701937 1...
## 41   MULTIPOLYGON Z (((2751489 1...
## 47   MULTIPOLYGON Z (((2744263 1...
## 48   MULTIPOLYGON Z (((2675447 1...
## NA             MULTIPOLYGON Z EMPTY
## NA.1           MULTIPOLYGON Z EMPTY
## NA.2           MULTIPOLYGON Z EMPTY</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="overlay-toolset.html#cb77-1"></a><span class="co"># Merging the four areas into one</span></span>
<span id="cb77-2"><a href="overlay-toolset.html#cb77-2"></a>aOi_merged &lt;-<span class="st"> </span><span class="kw">st_union</span>(kantons_aOi)</span></code></pre></div>
<ul>
<li>Plot the merged area of interest</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="overlay-toolset.html#cb78-1"></a><span class="kw">tm_shape</span>(aOi_merged) <span class="op">+</span><span class="st"> </span><span class="kw">tm_polygons</span>(<span class="st">&quot;#f0f0f0&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">tm_layout</span>(<span class="dt">frame =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>The operation above produces the same outcome as the one depicted in the figure below <a href="overlay-toolset.html#fig:dissolve">5.2</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:dissolve"></span>
<img src="images/dissolve.png" alt="Dissolve operation in ArcGIS pro" width="750px" />
<p class="caption">
Figure 5.2: Dissolve operation in ArcGIS pro
</p>
</div>
</div>
<div id="erase" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Erase</h3>
</div>
<div id="union" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Union</h3>
</div>
<div id="symmetrical-difference" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Symmetrical Difference</h3>
</div>
<div id="spatial-join" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Spatial Join</h3>
<p>§
Say you have two datasets:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="overlay-toolset.html#cb79-1"></a><span class="kw">library</span>(sf)</span>
<span id="cb79-2"><a href="overlay-toolset.html#cb79-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb79-3"><a href="overlay-toolset.html#cb79-3"></a>zweitwohnung &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="st">&quot;sample_data/other/zweitwohnung_gemeinden.gpkg&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb79-4"><a href="overlay-toolset.html#cb79-4"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(kanton <span class="op">==</span><span class="st"> &quot;Valais / Wallis&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb79-5"><a href="overlay-toolset.html#cb79-5"></a><span class="st">  </span><span class="kw">select</span>(NAME)</span>
<span id="cb79-6"><a href="overlay-toolset.html#cb79-6"></a></span>
<span id="cb79-7"><a href="overlay-toolset.html#cb79-7"></a>bbox &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(zweitwohnung) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_as_sfc</span>()</span>
<span id="cb79-8"><a href="overlay-toolset.html#cb79-8"></a></span>
<span id="cb79-9"><a href="overlay-toolset.html#cb79-9"></a>points &lt;-<span class="st"> </span><span class="kw">st_sample</span>(bbox,<span class="dv">500</span>)</span>
<span id="cb79-10"><a href="overlay-toolset.html#cb79-10"></a></span>
<span id="cb79-11"><a href="overlay-toolset.html#cb79-11"></a><span class="kw">ggplot</span>(zweitwohnung) <span class="op">+</span><span class="st"> </span><span class="kw">geom_sf</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> points)</span></code></pre></div>
<p>In R, the function used to join two datastes is <code>st_join(x,y)</code>. If you have to different data types (e.g. Points and Polygons) the first question you have to ask yourself is: what data type should the output be? The datatype of <code>x</code> determins what the output datatype is.
So with the above data: Say for each point, we want to know the Name (<code>NAME</code>) of the “Geimeinde” in which it lies. This means the output is a point dataset. We therefore write:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="overlay-toolset.html#cb80-1"></a><span class="kw">st_join</span>(<span class="kw">st_sf</span>(points),zweitwohnung,<span class="dt">join =</span> st_within)</span></code></pre></div>
<p>Note that points not located in a Gemeinde get the value <code>NA</code>. You have to specify the spatial relationship of your join method within the argument <code>join =</code>. This argument take a so called spatial predicate function. From the join_methods available in ArcGIS, here’s the equivalant spatial predicate function:</p>
<table>
<thead>
<tr class="header">
<th>ArcGIS Term</th>
<th>R Spatial Predicate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intersect</td>
<td>st_intersect</td>
</tr>
<tr class="even">
<td>Intersect 3D</td>
<td>(1)</td>
</tr>
<tr class="odd">
<td>Within a distance</td>
<td>st_is_within_distance</td>
</tr>
<tr class="even">
<td>Within a distance geodesic</td>
<td>??</td>
</tr>
<tr class="odd">
<td>Within a distance 3D</td>
<td>(1)</td>
</tr>
<tr class="even">
<td>Contains</td>
<td>st_contains</td>
</tr>
<tr class="odd">
<td>Completely contains</td>
<td><em>st_contains_properly?</em></td>
</tr>
<tr class="even">
<td>Contains clementini</td>
<td>??</td>
</tr>
<tr class="odd">
<td>Within</td>
<td>st_within</td>
</tr>
<tr class="even">
<td>Completely within</td>
<td></td>
</tr>
<tr class="odd">
<td>Within clementini</td>
<td>??</td>
</tr>
<tr class="even">
<td>Are identical to</td>
<td><em>st_equals?</em></td>
</tr>
<tr class="odd">
<td>boundry touches</td>
<td>st_touches</td>
</tr>
<tr class="even">
<td>Share a line segment</td>
<td></td>
</tr>
<tr class="odd">
<td>Have their center in</td>
<td></td>
</tr>
<tr class="even">
<td>Closest</td>
<td><em>st_nearest_feature?</em></td>
</tr>
<tr class="odd">
<td>Closest geodesic</td>
<td>??</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>All binary predicates only work on 2D Objects (see <a href="https://github.com/r-spatial/sf/issues/907">this issue</a>)</li>
</ol>
</div>
<div id="intersect" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Intersect</h3>
</div>
<div id="identity" class="section level3">
<h3><span class="header-section-number">5.2.7</span> Identity</h3>
</div>
<div id="update" class="section level3">
<h3><span class="header-section-number">5.2.8</span> Update</h3>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extract-toolset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="proximity-toolset.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
