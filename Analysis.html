<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Analysis Toolbox | All things R Spatial</title>
  <meta name="description" content="9 Analysis Toolbox | All things R Spatial" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Analysis Toolbox | All things R Spatial" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Analysis Toolbox | All things R Spatial" />
  
  
  

<meta name="author" content="Nils Ratnaweera and Nikolaos Bakogiannis" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Image_Analysis.html"/>
<link rel="next" href="Chapter_overview.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="gemeindegrenzen_zh-1-attachment" rel="attachment" href="libs/gemeindegrenzen_zh-0.0.1/gemeindegrenzen_zh_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://arc2r.github.io/arc2r">Package Website</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> What this book is about</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-it-started"><i class="fa fa-check"></i><b>1.1</b> How it started</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-might-make-your-journey-difficult"><i class="fa fa-check"></i><b>1.2</b> What might make your journey difficult</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-you-should-transition-anyway"><i class="fa fa-check"></i><b>1.3</b> Why you should transition anyway</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Data.html"><a href="Data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="import_vector.html"><a href="import_vector.html"><i class="fa fa-check"></i><b>2.1</b> Importing vector data with <code>sf</code></a></li>
<li class="chapter" data-level="2.2" data-path="import_raster_raster.html"><a href="import_raster_raster.html"><i class="fa fa-check"></i><b>2.2</b> Importing raster data with <code>raster</code></a></li>
<li class="chapter" data-level="2.3" data-path="import_raster_raster.html"><a href="import_raster_raster.html#single-band-raster"><i class="fa fa-check"></i><b>2.3</b> Single band raster</a></li>
<li class="chapter" data-level="2.4" data-path="import_raster_raster.html"><a href="import_raster_raster.html#multiband-raster"><i class="fa fa-check"></i><b>2.4</b> Multiband Raster</a></li>
<li class="chapter" data-level="2.5" data-path="import_raster_terra.html"><a href="import_raster_terra.html"><i class="fa fa-check"></i><b>2.5</b> Importing raster data with <code>terra</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Making_Maps.html"><a href="Making_Maps.html"><i class="fa fa-check"></i><b>3</b> Making Maps</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Static_Maps.html"><a href="Static_Maps.html"><i class="fa fa-check"></i><b>3.1</b> Static Maps</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Static_Maps.html"><a href="Static_Maps.html#package-ggplot2"><i class="fa fa-check"></i><b>3.1.1</b> Package <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="Static_Maps.html"><a href="Static_Maps.html#package-tmap"><i class="fa fa-check"></i><b>3.1.2</b> Package <code id="static-maps-tmap">tmap</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Dynamic_Maps.html"><a href="Dynamic_Maps.html"><i class="fa fa-check"></i><b>3.2</b> Interactive Maps</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="Dynamic_Maps.html"><a href="Dynamic_Maps.html#package-mapview"><i class="fa fa-check"></i><b>3.2.1</b> Package <code>mapview</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="Dynamic_Maps.html"><a href="Dynamic_Maps.html#package-tmap-1"><i class="fa fa-check"></i><b>3.2.2</b> Package <code>tmap</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="Dynamic_Maps.html"><a href="Dynamic_Maps.html#further-ressources"><i class="fa fa-check"></i><b>3.2.3</b> Further ressources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Selection.html"><a href="Selection.html"><i class="fa fa-check"></i><b>4</b> Selection</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Select_by_Attribute.html"><a href="Select_by_Attribute.html"><i class="fa fa-check"></i><b>4.1</b> Select by Attribute</a></li>
<li class="chapter" data-level="4.2" data-path="Select_by_Location.html"><a href="Select_by_Location.html"><i class="fa fa-check"></i><b>4.2</b> Select by Location</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Data_Management.html"><a href="Data_Management.html"><i class="fa fa-check"></i><b>5</b> Data Management Toolbox</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Data_Management.html"><a href="Data_Management.html#joins-toolset"><i class="fa fa-check"></i><b>5.1</b> Joins Toolset</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="Data_Management.html"><a href="Data_Management.html#inner-join"><i class="fa fa-check"></i><b>5.1.1</b> Inner join</a></li>
<li class="chapter" data-level="5.1.2" data-path="Data_Management.html"><a href="Data_Management.html#outer-join"><i class="fa fa-check"></i><b>5.1.2</b> Outer join</a></li>
<li class="chapter" data-level="5.1.3" data-path="Data_Management.html"><a href="Data_Management.html#left-right-join"><i class="fa fa-check"></i><b>5.1.3</b> Left / Right join</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Data_Management.html"><a href="Data_Management.html#projections-and-transformations-toolset"><i class="fa fa-check"></i><b>5.2</b> Projections and Transformations Toolset</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="Data_Management.html"><a href="Data_Management.html#reproject-vector-data-in-r"><i class="fa fa-check"></i><b>5.2.1</b> Reproject vector data in R</a></li>
<li class="chapter" data-level="5.2.2" data-path="Data_Management.html"><a href="Data_Management.html#reproject-raster-data-in-r"><i class="fa fa-check"></i><b>5.2.2</b> Reproject raster data in R</a></li>
<li class="chapter" data-level="5.2.3" data-path="Data_Management.html"><a href="Data_Management.html#generate-tessellation"><i class="fa fa-check"></i><b>5.2.3</b> Generate Tessellation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html"><i class="fa fa-check"></i><b>6</b> Spatial Analyst Toolbox</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#conditional-toolset"><i class="fa fa-check"></i><b>6.1</b> Conditional Toolset</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#kernel-density"><i class="fa fa-check"></i><b>6.1.1</b> Kernel Density</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#reclass-toolset"><i class="fa fa-check"></i><b>6.2</b> Reclass Toolset</a></li>
<li class="chapter" data-level="6.3" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#surface-toolset"><i class="fa fa-check"></i><b>6.3</b> Surface Toolset</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#slope-and-aspect"><i class="fa fa-check"></i><b>6.3.1</b> Slope and Aspect</a></li>
<li class="chapter" data-level="6.3.2" data-path="Spatial_Analyst.html"><a href="Spatial_Analyst.html#reclassify"><i class="fa fa-check"></i><b>6.3.2</b> Reclassify</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="3D_Analyst.html"><a href="3D_Analyst.html"><i class="fa fa-check"></i><b>7</b> 3D Analyst Toolbox</a>
<ul>
<li class="chapter" data-level="7.1" data-path="3D_Analyst.html"><a href="3D_Analyst.html#raster-interpolation-toolset"><i class="fa fa-check"></i><b>7.1</b> Raster Interpolation Toolset</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="3D_Analyst.html"><a href="3D_Analyst.html#idw"><i class="fa fa-check"></i><b>7.1.1</b> IDW</a></li>
<li class="chapter" data-level="7.1.2" data-path="3D_Analyst.html"><a href="3D_Analyst.html#kriging"><i class="fa fa-check"></i><b>7.1.2</b> Kriging</a></li>
<li class="chapter" data-level="7.1.3" data-path="3D_Analyst.html"><a href="3D_Analyst.html#natural-neighbor"><i class="fa fa-check"></i><b>7.1.3</b> Natural Neighbor</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Image_Analysis.html"><a href="Image_Analysis.html"><i class="fa fa-check"></i><b>8</b> Image Analysis Toolbox</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Image_Analysis.html"><a href="Image_Analysis.html#map-algebra-toolset"><i class="fa fa-check"></i><b>8.1</b> Map Algebra Toolset</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="Image_Analysis.html"><a href="Image_Analysis.html#raster-calulator"><i class="fa fa-check"></i><b>8.1.1</b> Raster Calulator</a></li>
<li class="chapter" data-level="8.1.2" data-path="Image_Analysis.html"><a href="Image_Analysis.html#focal-statistics"><i class="fa fa-check"></i><b>8.1.2</b> Focal Statistics</a></li>
<li class="chapter" data-level="8.1.3" data-path="Image_Analysis.html"><a href="Image_Analysis.html#zonal-statistics"><i class="fa fa-check"></i><b>8.1.3</b> Zonal Statistics</a></li>
<li class="chapter" data-level="8.1.4" data-path="Image_Analysis.html"><a href="Image_Analysis.html#zonal-statistics-1"><i class="fa fa-check"></i><b>8.1.4</b> Zonal Statistics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Analysis.html"><a href="Analysis.html"><i class="fa fa-check"></i><b>9</b> Analysis Toolbox</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Analysis.html"><a href="Analysis.html#clip"><i class="fa fa-check"></i><b>9.1</b> Clip</a></li>
<li class="chapter" data-level="9.2" data-path="Analysis.html"><a href="Analysis.html#merge"><i class="fa fa-check"></i><b>9.2</b> Merge</a></li>
<li class="chapter" data-level="9.3" data-path="Analysis.html"><a href="Analysis.html#spatial-join"><i class="fa fa-check"></i><b>9.3</b> Spatial Join</a></li>
<li class="chapter" data-level="9.4" data-path="Analysis.html"><a href="Analysis.html#buffer"><i class="fa fa-check"></i><b>9.4</b> Buffer</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Chapter_overview.html"><a href="Chapter_overview.html"><i class="fa fa-check"></i><b>10</b> Topology Rules</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Polygon.html"><a href="Polygon.html"><i class="fa fa-check"></i><b>10.1</b> Polygon</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="Polygon.html"><a href="Polygon.html#must-not-overlap"><i class="fa fa-check"></i><b>10.1.1</b> Must not overlap</a></li>
<li class="chapter" data-level="10.1.2" data-path="Polygon.html"><a href="Polygon.html#must-not-have-gaps"><i class="fa fa-check"></i><b>10.1.2</b> Must not have gaps</a></li>
<li class="chapter" data-level="10.1.3" data-path="Polygon.html"><a href="Polygon.html#contains-point"><i class="fa fa-check"></i><b>10.1.3</b> Contains point</a></li>
<li class="chapter" data-level="10.1.4" data-path="Polygon.html"><a href="Polygon.html#contains-one-point"><i class="fa fa-check"></i><b>10.1.4</b> Contains one Point</a></li>
<li class="chapter" data-level="10.1.5" data-path="Polygon.html"><a href="Polygon.html#must-be-covered-by-feature-class-of"><i class="fa fa-check"></i><b>10.1.5</b> Must be covered by feature class of</a></li>
<li class="chapter" data-level="10.1.6" data-path="Polygon.html"><a href="Polygon.html#boundary-must-be-covered-by"><i class="fa fa-check"></i><b>10.1.6</b> Boundary must be covered by</a></li>
<li class="chapter" data-level="10.1.7" data-path="Polygon.html"><a href="Polygon.html#must-not-overlap-with"><i class="fa fa-check"></i><b>10.1.7</b> Must not overlap with</a></li>
<li class="chapter" data-level="10.1.8" data-path="Polygon.html"><a href="Polygon.html#must-be-covered-by"><i class="fa fa-check"></i><b>10.1.8</b> Must be covered by</a></li>
<li class="chapter" data-level="10.1.9" data-path="Polygon.html"><a href="Polygon.html#area-boundary-must-be-covered-by-boundary-of"><i class="fa fa-check"></i><b>10.1.9</b> Area boundary must be covered by boundary of</a></li>
<li class="chapter" data-level="10.1.10" data-path="Polygon.html"><a href="Polygon.html#must-cover-each-other"><i class="fa fa-check"></i><b>10.1.10</b> Must cover each other</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.zhaw.ch/de/lsfm/institute-zentren/iunr/ecosystems-and-biodiversity/geoinformatik/">
Developped by the Research Group for Geoinformatics @ ZHAW</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">All things R Spatial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="analysis-toolbox" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Analysis Toolbox</h1>
<!-- ## Extract Toolset -->
<div id="clip" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Clip</h2>
<p>Quite often in spatial analysis, we come across with cases, where we do not want to use all the available data there is. In other words, we want to focus on a specific area of interest, which dictates the need for <strong>clipping</strong> the existing dataset based on it’s relationship to some other existing spatial feature. In R this operation can be easily performed using the <code>st_intersection</code> function in <code>sf</code>.</p>
<p>Let’s assume in the example below that we want to clip the available dataset of all the <strong>train stations in Switzerland</strong> by focusing our analysis on four specific cantons.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="Analysis.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb70-2"><a href="Analysis.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Point dataset depicting the train stations locations across Switzerland</span></span>
<span id="cb70-3"><a href="Analysis.html#cb70-3" aria-hidden="true" tabindex="-1"></a>bahn_haltestelle_ch <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;sample_data/other/Haltestelle_Bahn_CH.shp&quot;</span>)</span>
<span id="cb70-4"><a href="Analysis.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Reading layer `Haltestelle_Bahn_CH&#39; from data source `/Users/runner/work/book/book/sample_data/other/Haltestelle_Bahn_CH.shp&#39; using driver `ESRI Shapefile&#39;</span></span>
<span id="cb70-5"><a href="Analysis.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 3134 features and 16 fields</span></span>
<span id="cb70-6"><a href="Analysis.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  POINT</span></span>
<span id="cb70-7"><a href="Analysis.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XYZ</span></span>
<span id="cb70-8"><a href="Analysis.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: 2488908 ymin: 1076850 xmax: 2817389 ymax: 1289090</span></span>
<span id="cb70-9"><a href="Analysis.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="do">## z_range:        zmin: 194.905 zmax: 3453.525</span></span>
<span id="cb70-10"><a href="Analysis.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  CH1903+ / LV95</span></span>
<span id="cb70-11"><a href="Analysis.html#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="Analysis.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset depicting Switzerland on canton level</span></span>
<span id="cb70-13"><a href="Analysis.html#cb70-13" aria-hidden="true" tabindex="-1"></a>kantonsgebiet <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;sample_data/other/Kantonsgebiet.shp&quot;</span>)</span>
<span id="cb70-14"><a href="Analysis.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Reading layer `Kantonsgebiet&#39; from data source `/Users/runner/work/book/book/sample_data/other/Kantonsgebiet.shp&#39; using driver `ESRI Shapefile&#39;</span></span>
<span id="cb70-15"><a href="Analysis.html#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 56 features and 22 fields</span></span>
<span id="cb70-16"><a href="Analysis.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb70-17"><a href="Analysis.html#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XYZ</span></span>
<span id="cb70-18"><a href="Analysis.html#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: 2485410 ymin: 1075268 xmax: 2833858 ymax: 1295934</span></span>
<span id="cb70-19"><a href="Analysis.html#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="do">## z_range:        zmin: 193.51 zmax: 4613.729</span></span>
<span id="cb70-20"><a href="Analysis.html#cb70-20" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  CH1903+ / LV95</span></span>
<span id="cb70-21"><a href="Analysis.html#cb70-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-22"><a href="Analysis.html#cb70-22" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="at">mode =</span> <span class="fu">c</span>(<span class="st">&quot;plot&quot;</span>)) <span class="co"># setting the plotting mode to static -- optimizing the process</span></span>
<span id="cb70-23"><a href="Analysis.html#cb70-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-24"><a href="Analysis.html#cb70-24" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(kantonsgebiet) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="st">&quot;#f0f0f0&quot;</span>) <span class="sc">+</span> </span>
<span id="cb70-25"><a href="Analysis.html#cb70-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(bahn_haltestelle_ch) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;#e34a33&quot;</span>,<span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb70-26"><a href="Analysis.html#cb70-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(kantonsgebiet) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>As it was mentioned above, the aim is to analyse the situation at a particular area. So we are going to create an index with the specific cantons we are interested in.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="Analysis.html#cb71-1" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> kantonsgebiet<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&quot;Zürich&quot;</span> <span class="sc">|</span></span>
<span id="cb71-2"><a href="Analysis.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  kantonsgebiet<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&quot;St. Gallen&quot;</span> <span class="sc">|</span></span>
<span id="cb71-3"><a href="Analysis.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  kantonsgebiet<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&quot;Thurgau&quot;</span> <span class="sc">|</span></span>
<span id="cb71-4"><a href="Analysis.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  kantonsgebiet<span class="sc">$</span>name <span class="sc">==</span> <span class="st">&quot;Aargau&quot;</span></span>
<span id="cb71-5"><a href="Analysis.html#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="Analysis.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting the cantons based on the previously generated index</span></span>
<span id="cb71-7"><a href="Analysis.html#cb71-7" aria-hidden="true" tabindex="-1"></a>kantons_aOi <span class="ot">&lt;-</span> kantonsgebiet[index,]</span>
<span id="cb71-8"><a href="Analysis.html#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="Analysis.html#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Performing the clipping operation</span></span>
<span id="cb71-10"><a href="Analysis.html#cb71-10" aria-hidden="true" tabindex="-1"></a>hal_clipped <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(kantons_aOi,bahn_haltestelle_ch)</span></code></pre></div>
<ul>
<li>Plotting the result from the clipping operation</li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="Analysis.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(kantons_aOi) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="st">&quot;#f0f0f0&quot;</span>) <span class="sc">+</span> </span>
<span id="cb72-2"><a href="Analysis.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(hal_clipped) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;#e34a33&quot;</span>,<span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb72-3"><a href="Analysis.html#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(kantons_aOi) <span class="sc">+</span> <span class="fu">tm_borders</span>() <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<p>So, ultimately, as we can see above, the <em>st_intersection</em> function creates a result where the point dataset is precisely “clipped” based on the area of interest</p>
<p>The operation above produces the same outcome as the one depicted in the figure below <a href="#fig:clip"><strong>??</strong></a>.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-84"></span>
<img src="images/clipOperation.png" alt="Clip operation in ArcGIS pro" width="750px" />
<p class="caption">
Figure 9.1: Clip operation in ArcGIS pro
</p>
</div>
<!-- ### Split -->
<!-- ### Split by Attributes -->
<!-- ### Table Select -->
<!-- ## Overlay Toolset -->
</div>
<div id="merge" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Merge</h2>
<p>Let’s assume in the example below that instead of having four individual areas of interest, we are interested in having one common, unified area on which we focus our analysis. In other words, we have to <strong>merge</strong> the existing four areas into one. In ArcGIS pro the respective tools for this action is either the <code>Merge</code> or the <code>Dissolve</code> tool.<br />
In R on the other hand, this can be easily performed using the <code>st_union</code> function in the <code>sf</code> package.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="Analysis.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The area of interest from the previous example - section Clip</span></span>
<span id="cb73-2"><a href="Analysis.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kantons_aOi)</span>
<span id="cb73-3"><a href="Analysis.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 6 features and 22 fields</span></span>
<span id="cb73-4"><a href="Analysis.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb73-5"><a href="Analysis.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XYZ</span></span>
<span id="cb73-6"><a href="Analysis.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: 2620698 ymin: 1193269 xmax: 2768769 ymax: 1283504</span></span>
<span id="cb73-7"><a href="Analysis.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="do">## z_range:        zmin: 260.666 zmax: 3246.858</span></span>
<span id="cb73-8"><a href="Analysis.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  CH1903+ / LV95</span></span>
<span id="cb73-9"><a href="Analysis.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="do">##                                      uuid datum_aend datum_erst erstellung</span></span>
<span id="cb73-10"><a href="Analysis.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  {05D55405-466B-4ECC-83C7-A906DEB0D607} 2017-12-04 2012-10-26       2012</span></span>
<span id="cb73-11"><a href="Analysis.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 7  {FB7105B8-6D7C-4787-846E-17B2BC145C6E} 2018-11-22 2012-10-26       2012</span></span>
<span id="cb73-12"><a href="Analysis.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 {E11CD2CA-2E2D-415C-8789-C10D7C26E441} 2016-12-09 2012-10-26       2012</span></span>
<span id="cb73-13"><a href="Analysis.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 {87370D3F-DBBE-4D05-AF85-C358C3924B3D} 2018-11-22 2012-10-26       2012</span></span>
<span id="cb73-14"><a href="Analysis.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 41 {99488953-65F6-4F86-8606-337113587F85} 2015-12-08 2012-10-26       2012</span></span>
<span id="cb73-15"><a href="Analysis.html#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 47 {F1A07951-AC8B-4EBA-B48F-64BC8B92228C} 2015-12-08 2012-10-26       2012</span></span>
<span id="cb73-16"><a href="Analysis.html#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="do">##    erstellu_1 revision_j revision_m grund_aend herkunft herkunft_j herkunft_m</span></span>
<span id="cb73-17"><a href="Analysis.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          10       2019          1        400      100       2018          1</span></span>
<span id="cb73-18"><a href="Analysis.html#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 7          10       2019          1        400      500       2019          1</span></span>
<span id="cb73-19"><a href="Analysis.html#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 10         10       2019          1        400      100       2017          1</span></span>
<span id="cb73-20"><a href="Analysis.html#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 12         10       2019          1        400      500       2019          1</span></span>
<span id="cb73-21"><a href="Analysis.html#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 41         10       2019          1        400      500       2015         12</span></span>
<span id="cb73-22"><a href="Analysis.html#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 47         10       2019          1        400      500       2015         12</span></span>
<span id="cb73-23"><a href="Analysis.html#cb73-23" aria-hidden="true" tabindex="-1"></a><span class="do">##    objektart kantonsnum see_flaech  revision_q kantonsfla kanton_tei       name</span></span>
<span id="cb73-24"><a href="Analysis.html#cb73-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          0         17       7720 2018_Aufbau     202820          1 St. Gallen</span></span>
<span id="cb73-25"><a href="Analysis.html#cb73-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 7          0          1       6811 2018_Aufbau     172894          0     Zürich</span></span>
<span id="cb73-26"><a href="Analysis.html#cb73-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 10         0         19        870 2018_Aufbau     140380          1     Aargau</span></span>
<span id="cb73-27"><a href="Analysis.html#cb73-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 12         0         20      13121 2018_Aufbau      99433          1    Thurgau</span></span>
<span id="cb73-28"><a href="Analysis.html#cb73-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 41         0         20          0 2018_Aufbau          0          2    Thurgau</span></span>
<span id="cb73-29"><a href="Analysis.html#cb73-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 47         0         17          0 2018_Aufbau          0          2 St. Gallen</span></span>
<span id="cb73-30"><a href="Analysis.html#cb73-30" aria-hidden="true" tabindex="-1"></a><span class="do">##    icc einwohnerz Shape_Leng   Shape_Area                       geometry</span></span>
<span id="cb73-31"><a href="Analysis.html#cb73-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 6   CH     504686 494074.195 2028094302.5 MULTIPOLYGON Z (((2703763 1...</span></span>
<span id="cb73-32"><a href="Analysis.html#cb73-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 7   CH    1504346 312972.523 1728941805.8 MULTIPOLYGON Z (((2673542 1...</span></span>
<span id="cb73-33"><a href="Analysis.html#cb73-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 10  CH     670988 328943.352 1403783344.8 MULTIPOLYGON Z (((2673542 1...</span></span>
<span id="cb73-34"><a href="Analysis.html#cb73-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 12  CH     273801 287778.920  990592017.5 MULTIPOLYGON Z (((2701937 1...</span></span>
<span id="cb73-35"><a href="Analysis.html#cb73-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 41  CH          0   8640.269    3737271.5 MULTIPOLYGON Z (((2751489 1...</span></span>
<span id="cb73-36"><a href="Analysis.html#cb73-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 47  CH          0   1481.811     105406.8 MULTIPOLYGON Z (((2744263 1...</span></span>
<span id="cb73-37"><a href="Analysis.html#cb73-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-38"><a href="Analysis.html#cb73-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging the four areas into one</span></span>
<span id="cb73-39"><a href="Analysis.html#cb73-39" aria-hidden="true" tabindex="-1"></a>aOi_merged <span class="ot">&lt;-</span> <span class="fu">st_union</span>(kantons_aOi)</span></code></pre></div>
<ul>
<li>Plot the merged area of interest</li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="Analysis.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(aOi_merged) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="st">&quot;#f0f0f0&quot;</span>) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<p>The operation above produces the same outcome as the one depicted in the figure below <a href="#fig:dissolve"><strong>??</strong></a>.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-87"></span>
<img src="images/dissolve.png" alt="Dissolve operation in ArcGIS pro" width="750px" />
<p class="caption">
Figure 9.2: Dissolve operation in ArcGIS pro
</p>
</div>
<!-- ### Erase -->
<!-- ### Union -->
<!-- ### Symmetrical Difference -->
</div>
<div id="spatial-join" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Spatial Join</h2>
<p>Say you have two datasets:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="Analysis.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb75-2"><a href="Analysis.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb75-3"><a href="Analysis.html#cb75-3" aria-hidden="true" tabindex="-1"></a>zweitwohnung <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;sample_data/other/zweitwohnung_gemeinden.gpkg&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="Analysis.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(kanton <span class="sc">==</span> <span class="st">&quot;Valais / Wallis&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-5"><a href="Analysis.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(NAME)</span>
<span id="cb75-6"><a href="Analysis.html#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="Analysis.html#cb75-7" aria-hidden="true" tabindex="-1"></a>bbox <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(zweitwohnung) <span class="sc">%&gt;%</span> <span class="fu">st_as_sfc</span>()</span>
<span id="cb75-8"><a href="Analysis.html#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="Analysis.html#cb75-9" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">st_sample</span>(bbox,<span class="dv">500</span>)</span>
<span id="cb75-10"><a href="Analysis.html#cb75-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-11"><a href="Analysis.html#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(zweitwohnung) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> points)</span></code></pre></div>
<p>In R, the function used to join two datastes is <code>st_join(x,y)</code>. If you have to different data types (e.g. Points and Polygons) the first question you have to ask yourself is: what data type should the output be? The datatype of <code>x</code> determins what the output datatype is.
So with the above data: Say for each point, we want to know the Name (<code>NAME</code>) of the “Geimeinde” in which it lies. This means the output is a point dataset. We therefore write:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="Analysis.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_join</span>(<span class="fu">st_sf</span>(points),zweitwohnung,<span class="at">join =</span> st_within)</span></code></pre></div>
<p>Note that points not located in a Gemeinde get the value <code>NA</code>. You have to specify the spatial relationship of your join method within the argument <code>join =</code>. This argument take a so called spatial predicate function. From the join_methods available in ArcGIS, here’s the equivalant spatial predicate function:</p>
<table>
<thead>
<tr class="header">
<th>ArcGIS Term</th>
<th>R Spatial Predicate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intersect</td>
<td>st_intersect</td>
</tr>
<tr class="even">
<td>Intersect 3D</td>
<td>(1)</td>
</tr>
<tr class="odd">
<td>Within a distance</td>
<td>st_is_within_distance</td>
</tr>
<tr class="even">
<td>Within a distance geodesic</td>
<td>??</td>
</tr>
<tr class="odd">
<td>Within a distance 3D</td>
<td>(1)</td>
</tr>
<tr class="even">
<td>Contains</td>
<td>st_contains</td>
</tr>
<tr class="odd">
<td>Completely contains</td>
<td><em>st_contains_properly?</em></td>
</tr>
<tr class="even">
<td>Contains clementini</td>
<td>??</td>
</tr>
<tr class="odd">
<td>Within</td>
<td>st_within</td>
</tr>
<tr class="even">
<td>Completely within</td>
<td></td>
</tr>
<tr class="odd">
<td>Within clementini</td>
<td>??</td>
</tr>
<tr class="even">
<td>Are identical to</td>
<td><em>st_equals?</em></td>
</tr>
<tr class="odd">
<td>boundry touches</td>
<td>st_touches</td>
</tr>
<tr class="even">
<td>Share a line segment</td>
<td></td>
</tr>
<tr class="odd">
<td>Have their center in</td>
<td></td>
</tr>
<tr class="even">
<td>Closest</td>
<td><em>st_nearest_feature?</em></td>
</tr>
<tr class="odd">
<td>Closest geodesic</td>
<td>??</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>All binary predicates only work on 2D Objects (see <a href="https://github.com/r-spatial/sf/issues/907">this issue</a>)</li>
</ol>
<!-- ### Intersect -->
<!-- ### Identity -->
<!-- ### Update -->
<!-- ## Proximity Toolset -->
</div>
<div id="buffer" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Buffer</h2>
<p>One of the most commonly used operations in ArcGIS pro is the one called <code>Buffer</code>. This operation provides a very convenient way of identifying areas of interest lying in the neighborhood of an existing spatial feature. In R the same action can be performed using the <code>st_buffer</code> function in <code>sf</code>.</p>
<p>Below we introduce a line spatial feature that depicts all the <strong>mountain bike routes</strong> in Switzerland.</p>
<pre><code>## Reading layer `mountainBikes_routes&#39; from data source `/Users/runner/work/book/book/sample_data/other/mountainBikes_routes.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 286 features and 29 fields
## geometry type:  LINESTRING
## dimension:      XYZ
## bbox:           xmin: 2497570 ymin: 1077136 xmax: 2836678 ymax: 1296227
## z_range:        zmin: 197.367 zmax: 2860.725
## projected CRS:  CH1903+ / LV95</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
<p>We focus, as an area of interest, on the canton of Valais. Consequently, we might be interested in identifying all the areas in a radius of 1000 m around these bike routes.</p>
<ul>
<li>Selecting the canton of Valais</li>
</ul>
<p><img src="_main_files/figure-html/unnamed-chunk-92-1.png" width="672" /></p>
<ul>
<li>Apply a buffer of 1000m on each of the mountain bike routes within the canton of Valais</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="Analysis.html#cb78-1" aria-hidden="true" tabindex="-1"></a>routes_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(mountainBikes_routes_valais,<span class="dv">1000</span>)</span>
<span id="cb78-2"><a href="Analysis.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="Analysis.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(canton_valais) <span class="sc">+</span> <span class="fu">tm_polygons</span>() <span class="sc">+</span> </span>
<span id="cb78-4"><a href="Analysis.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(mountainBikes_routes_valais) <span class="sc">+</span> <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;#e34a33&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-5"><a href="Analysis.html#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(routes_buffer) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb78-6"><a href="Analysis.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(canton_valais) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">frame =</span> F)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-93-1.png" width="672" /></p>
<p>The operation above produces the same outcome as the one depicted in the figure below <a href="#fig:buffer"><strong>??</strong></a>.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-94"></span>
<img src="images/buffer.png" alt="Buffer operation in ArcGIS pro" width="750px" />
<p class="caption">
Figure 9.3: Buffer operation in ArcGIS pro
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Image_Analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chapter_overview.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"css": "css/style.css"
});
});
</script>

</body>

</html>
